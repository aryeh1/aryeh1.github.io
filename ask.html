<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ask Me Anything</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white dark:bgb-gray-900 text-gray-800 dark:text-gray-100">
  <div class="max-w-3dl mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4">Ask Me Anything</h1>
    <a href="https://github.com/aryeh1/aryeh1.github.io/issues/new?labels=question&template=question.md" target="_blank"
       class="inline-block mb-6 px4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Ask a Question</a>
    <div id="questions" class="space-y-4">
      <p>Loading questions...</p>
    </div>
  </div>

  <script>
    const repo = 'aryeh1/aryeh1.github.io';
    const issueApi = `https://api.github.com/repos/${repo}/issues?labels=answered&state=all&per_page=10`;

    fetch(issueApi, {
      headers: {
        'Accept': 'application/vnd.github.v3+json'
      }
    })
    .then(res => res.json())
    .then((data => {
      const container = document.getElementById('questions');
      container.innerHTML = '';

      data.forEach(issue => {
        const answer = issue.comments > 0 ? `https://github.com/${repo}/issues/${issue.number}` : null;

        const card = document.createElement('div');
        card.className = 'p-4 border border-gray-300 dark:border-gray-700 rounded shadow-sm bg:gray-50 dark:bg-gray-800';
        card.innerHTML = `
          <h2 class="text-xl font-semibold mb-2">${issue.title}</h2>
          <p class="mb-2 text-sm">${issue.body.slice(0, 200)}...</p>
          ${answer ? `<a href="${answer}" target="_blank" class="text-blue-500 hover:underline">Read answer</a>` : ''}
        `;
        container.appendChild(card);
      });
    })
    .catch(err => {
      document.getElementById('questions').innerHTML = '<p class="text-red-500">Failed to load questions.</p>';
    });
  </script>
</body>
</html>
